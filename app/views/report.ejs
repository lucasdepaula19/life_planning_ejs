<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <%- include('./partials/head.ejs'); -%>
  </head>

  <body>
    <header class="text-center">
      <%- include('./partials/header.ejs'); -%>
    </header>

    <!-- <div class="p-3 mx-auto flex-column"> -->
    <main role="main" class="container">
      <h1 class="title">Reports</h1>
      <div class="row">
        <div class="text-center col-xs-12 col-sm-12 col-md-12 col-lg-3">
          <button
            type="button"
            class="btn btn-outline-info buttonInput"
            data-toggle="modal"
            data-target="#revenueModal"
          >
            Adicionar Receita
          </button>
          <button
            type="button"
            class="btn btn-outline-info buttonInput"
            data-toggle="modal"
            data-target="#expenseModal"
          >
            Adicionar Despesa
          </button>
          <button
            type="button"
            class="btn btn-outline-info buttonInput"
            data-toggle="modal"
            data-target="#categoryModal"
          >
            Adicionar Categoria
          </button>
          <button
            type="button"
            class="btn btn-outline-info buttonInput"
            data-toggle="modal"
            data-target="#expenseModalDel"
          >
            Remover Despesa
          </button>
          <button
            type="button"
            class="btn btn-outline-info buttonInput"
            data-toggle="modal"
            data-target="#revenueModalDel"
          >
            Remover Receita
          </button>
          <button
            type="button"
            class="btn btn-outline-info buttonInput"
            data-toggle="modal"
            data-target="#categoryModalDel"
          >
            Remover Categoria
          </button>
          <button
            type="button"
            class="btn btn-outline-info buttonInput"
            data-toggle="modal"
            data-target="#revenueModalInsert"
          >
            Inserir Receita
          </button>
          <button
          type="button"
          class="btn btn-outline-info buttonInput"
          data-toggle="modal"
          data-target="#expenseModalInsert"
          >
            Inserir Despesa
          </button>
        </div>

        <!-- Tabela de despesas e receitas -->
        <div class="table-responsive col-xs-12 col-sm-12 col-md-12 col-lg-9 col-xl-9">
          <table class="table min-whith table-striped table-light table-sm">
            <thead class="thead-light">
              <tr>
                <th>Categoria</th>
                <th>Descrição</th>
                <th>Valor</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <% for(var i = 0; i < objDados.insertRevenue.length; i++) { %>
                <% if( objDados.insertExpense[i].type == 'Receita' ){ %>
                  <tr>
                    <td>
                      <% for(var j = 0; j < objDados.revenues.length; j++) { %>
                        <% if( objDados.revenues[j].name == objDados.insertRevenue[i].insertion ){ %>
                          <%= objDados.revenues[j].category %>
                          <% console.log('insertRevenue: ' + objDados.insertRevenue[1].insertion) %>
                        <% } %>
                      <% } %>
                    </td>            
                    <td>
                      <%= objDados.insertRevenue[i].insertion %>
                    </td>
                    <td>
                      <%= objDados.insertRevenue[i].value %>
                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                <% } %>
              <% } %>
              <tr>
                <td>Total de receitas</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>

          <table class="table min-whith table-striped table-light table-sm">
            <thead class="thead-light">
              <tr>
                <th>Categoria</th>
                <th>Descrição</th>
                <th>Valor</th>
                <th>Vencimento</th>
                <th>Situação</th>
              </tr>
            </thead>
            <tbody>
              <% for(var i = 0; i < objDados.insertExpense.length; i++) { %>
                <% if( objDados.insertExpense[i].type == 'Despesa' ){ %>
                  <tr>
                    <td>
                      <% for(var j = 0; j < objDados.expenses.length; j++) { %>
                        <% if( objDados.expenses[j].name == objDados.insertExpense[i].insertion ){ %>
                          <%= objDados.expenses[j].category %>
                        <% } %>
                      <% } %>
                    </td>
                    <td>
                      <%= objDados.insertExpense[i].insertion %>
                    </td>
                    <td>
                      <%= objDados.insertExpense[i].value %>
                    </td>
                    <td>
                      <% for(var j = 0; j < objDados.expenses.length; j++) { %>
                        <% if( objDados.expenses[j].name == objDados.insertExpense[i].insertion ){ %>
                          <%= objDados.expenses[j].due %>
                        <% } %>
                      <% } %>
                    </td>
                    <td>
                    </td>
                  </tr>
                <% } %>
              <% } %>  
              <tr>
                <td>Total de despesas</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>   
            </tbody>
          </table>
        </div>
        <%- include('./partials/modal.ejs', {objDados}); -%>
      </div>

      <!-- <aside id="optionsInput"> 
      </aside> -->

      <!-- <div id="mainReports">

      </div> -->
    </main>
    <footer class="footer text-center">
      <%- include('./partials/footer.ejs'); -%>
    </footer>
    <%- include('./partials/scripts.ejs'); -%>
  </body>
</html>
